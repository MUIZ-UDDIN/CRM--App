  // Handle deal form submission
  const handleAddDeal = async (e: React.FormEvent) => {
    e.preventDefault();
    
    try {
      await dealsService.createDeal({
        title: dealFormData.title,
        value: parseFloat(dealFormData.value) || 0,
        company: dealFormData.company,
        contact: dealFormData.contact,
        stage_id: dealFormData.stage,
        pipeline_id: "1",
        expected_close_date: dealFormData.expectedCloseDate || undefined
      });
      
      // Reset form and close modal
      setDealFormData({
        title: "",
        value: "",
        company: "",
        contact: "",
        stage: "qualification",
        expectedCloseDate: ""
      });
      setShowAddDealModal(false);
      
      // Show success message
      toast.success("Deal created successfully!");
    } catch (error) {
      console.error("Error creating deal:", error);
      toast.error("Failed to create deal");
    }
  };
